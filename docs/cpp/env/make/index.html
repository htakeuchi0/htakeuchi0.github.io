<!doctype html><html lang=ja-jp dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Makefile プロジェクト
  #


  概要
  #

本ページでは，Makefile を使ったプロジェクトのディレクトリ構成の例を説明します．
cpp_env_sample ディレクトリ以下にソースコードなどを配置することとします．

  Github リポジトリ
  #

本ページで説明するディレクトリ構成のプロジェクトは，以下の Github リポジトリ [1] として公開しています．
https://github.com/htakeuchi0/cpp_env_sample
本ページは CC BY 4.0 のもとで提供していますが，このリポジトリはMITライセンスで公開しています．

  動作環境
  #

本ページで説明するものは，以下の環境で動作するものです．


OS: Linux (Ubuntu 18.04.5 LTS)

コンパイラ: g++ (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0



OS: Linux (Ubuntu 20.04.1 LTS)

コンパイラ: g++ (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0



単体試験，カバレッジ計測，ドキュメント生成に，それぞれ以下を利用するものとします．

Google Test [2]
LCOV [3]
Doxygen [4]


  ディレクトリ構成
  #

ディレクトリ構成の例は以下の通りです．
|- cpp_env_sample/
   |- Doxyfile               - doxygen設定ファイル
   |- LICENSE                - ライセンスファイル
   |- Makefile               - makeファイル
   |- README.md              - READMEファイル
   |- include/               - ヘッダファイル
   |  |- cpp_env_sample/
   |     |- example.h
   |
   |- main/                  - メインファイル
   |  |- main.cc
   |
   |- scripts/               - 環境構築用スクリプト
   |  |- install_doxygen.sh
   |  |- install_gtest.sh
   |  |- install_lcov.sh
   |
   |- src/                   - ソースファイル
   |  |- example.cc
   |
   |- test/                  - テストファイル
      |- gtest_example.cc

  ソースコード関連のディレクトリ
  #

ソースコード関連のディレクトリを抜き出すと以下のとおりです．"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://htakeuchi0.github.io/docs/cpp/env/make/"><meta property="og:site_name" content="htakeuchi0 のノート"><meta property="og:title" content="Makefile プロジェクト"><meta property="og:description" content="Makefile プロジェクト # 概要 # 本ページでは，Makefile を使ったプロジェクトのディレクトリ構成の例を説明します．
cpp_env_sample ディレクトリ以下にソースコードなどを配置することとします．
Github リポジトリ # 本ページで説明するディレクトリ構成のプロジェクトは，以下の Github リポジトリ [1] として公開しています．
https://github.com/htakeuchi0/cpp_env_sample
本ページは CC BY 4.0 のもとで提供していますが，このリポジトリはMITライセンスで公開しています．
動作環境 # 本ページで説明するものは，以下の環境で動作するものです．
OS: Linux (Ubuntu 18.04.5 LTS)
コンパイラ: g++ (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0 OS: Linux (Ubuntu 20.04.1 LTS)
コンパイラ: g++ (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0 単体試験，カバレッジ計測，ドキュメント生成に，それぞれ以下を利用するものとします．
Google Test [2] LCOV [3] Doxygen [4] ディレクトリ構成 # ディレクトリ構成の例は以下の通りです．
|- cpp_env_sample/ |- Doxyfile - doxygen設定ファイル |- LICENSE - ライセンスファイル |- Makefile - makeファイル |- README.md - READMEファイル |- include/ - ヘッダファイル | |- cpp_env_sample/ | |- example.h | |- main/ - メインファイル | |- main.cc | |- scripts/ - 環境構築用スクリプト | |- install_doxygen.sh | |- install_gtest.sh | |- install_lcov.sh | |- src/ - ソースファイル | |- example.cc | |- test/ - テストファイル |- gtest_example.cc ソースコード関連のディレクトリ # ソースコード関連のディレクトリを抜き出すと以下のとおりです．"><meta property="og:locale" content="ja_jp"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-01-27T22:53:01+09:00"><title>Makefile プロジェクト | htakeuchi0 のノート</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://htakeuchi0.github.io/docs/cpp/env/make/><link rel=stylesheet href=/book.min.f0351d5c25e0eea9082c331897093f7196a63e3b47c9191bec02c70e7740621c.css integrity="sha256-8DUdXCXg7qkILDMYlwk/cZamPjtHyRkb7ALHDndAYhw=" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-RXNBZFC7LX"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RXNBZFC7LX")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>htakeuchi0 のノート</span></a></h2><ul><li><a href=/docs/cpp/>C++</a><ul><li><a href=/docs/cpp/env/>開発環境</a><ul><li><a href=/docs/cpp/env/make/ class=active>Makefile プロジェクト</a></li><li><a href=/docs/cpp/env/autoconf/>autoconf プロジェクト (1)</a></li><li><a href=/docs/cpp/env/autoconf2/>autoconf プロジェクト (2)</a></li><li><a href=/docs/cpp/env/autoconf3/>autoconf プロジェクト (3)</a></li><li><a href=/docs/cpp/env/autoconf4/>autoconf プロジェクト (4)</a></li><li><a href=/docs/cpp/env/cmake/>CMake プロジェクト (1)</a></li><li><a href=/docs/cpp/env/cmake2/>CMake プロジェクト (2)</a></li></ul></li><li><a href=/docs/cpp/fp/>関数ポインタ</a><ul><li><a href=/docs/cpp/fp/fp/>関数ポインタとその周辺</a></li><li><a href=/docs/cpp/fp/mfp/>メンバ関数ポインタとその周辺</a></li><li><a href=/docs/cpp/fp/stdfunc/>std::function とその周辺</a></li><li><a href=/docs/cpp/fp/fref/>関数への参照</a></li><li><a href=/docs/cpp/fp/retfp/>関数ポインタを返却する関数</a></li></ul></li><li><a href=/docs/cpp/arrp/>配列へのポインタ</a><ul><li><a href=/docs/cpp/arrp/arrp/>配列へのポインタとその周辺</a></li><li><a href=/docs/cpp/arrp/arr_ref/>配列への参照</a></li><li><a href=/docs/cpp/arrp/stdarray/>std::array について</a></li><li><a href=/docs/cpp/arrp/retarrref/>配列への参照を返却する関数</a></li></ul></li><li><a href=/docs/cpp/mmul/>行列積の計算時間</a><ul><li><a href=/docs/cpp/mmul/basic/>行列を表現するデータ構造と行列積の計算時間</a></li><li><a href=/docs/cpp/mmul/openmp/>行列積の計算時間のOpenMPによる高速化</a></li><li><a href=/docs/cpp/mmul/avx/>行列積の計算時間のCPU拡張命令による高速化</a></li></ul></li></ul></li><li><a href=/docs/math/>数学一般</a><ul><li><a href=/docs/math/algebra/>代数</a><ul><li><a href=/docs/math/algebra/poly/>多項式</a></li><li><a href=/docs/math/algebra/groebner/>多変数連立代数方程式とグレブナー基底</a></li><li><a href=/docs/math/algebra/padicint/>p進整数環と射影極限</a></li></ul></li><li><a href=/docs/math/exp/>指数関数の定積分</a></li><li><a href=/docs/math/exp_normal/>指数関数の定積分：正規分布の累積分布関数の計算への応用</a></li><li><a href=/docs/math/optim/>数理最適化</a><ul><li><a href=/docs/math/optim/manopt/>多様体上の数理最適化</a><ul></ul></li></ul></li><li><a href=/docs/math/complex/>函数論</a><ul><li><a href=/docs/math/complex/picard/>Picard の定理</a></li></ul></li><li><a href=/docs/math/stat/>数理統計</a><ul><li><a href=/docs/math/stat/dice/>サイコロの出目の確率</a><ul><li><a href=/docs/math/stat/dice/dice_basic/>サイコロを繰り返し投げる試行の確率モデル</a></li><li><a href=/docs/math/stat/dice/dice_ratio/>サイコロをN回投げたときちょうど6回に1回の割合で1の目が出る確率</a></li><li><a href=/docs/math/stat/dice/dice_approx_ratio/>サイコロをN回投げたときおよそ6回に1回程度の割合で1の目が出ることの確認</a></li><li><a href=/docs/math/stat/dice/dice_randval/>サイコロをN回投げたときおよそ6回に1回程度の割合で1の目が出ることの確率変数の導入による整理</a></li><li><a href=/docs/math/stat/dice/dice_inf/>サイコロを無限回投げる場合の確率モデル</a></li></ul></li><li><a href=/docs/math/stat/dp/>差分プライバシ</a><ul><li><a href=/docs/math/stat/dp/basic/>差分プライバシの基本</a></li></ul></li><li><a href=/docs/math/stat/lap/>ラプラス分布</a><ul><li><a href=/docs/math/stat/lap/trunclap/>ラプラス分布と切断ラプラス分布</a></li><li><a href=/docs/math/stat/lap/sampling/>ラプラス分布や切断ラプラス分布からのサンプリング</a></li><li><a href=/docs/math/stat/lap/mle/>特殊なラプラス分布や切断ラプラス分布のパラメータ推定</a></li></ul></li></ul></li><li><a href=/docs/math/year2023/>2023</a><ul><li><a href=/docs/math/year2023/year2023_2/>2023 - 実装改良編</a></li></ul></li><li><a href=/docs/math/plarail/>プラレールのある数学的定式化について</a><ul><li><a href=/docs/math/plarail/rail/>レール</a></li><li><a href=/docs/math/plarail/layout/>レイアウト</a></li><li><a href=/docs/math/plarail/plarail-problems/>プラレール問題</a></li></ul></li></ul></li><li><a href=/docs/hugo/>Hugo</a><ul><li><a href=/docs/hugo/base/>空のサイトの生成</a></li><li><a href=/docs/hugo/set_config/>ページの追加とサイトの設定</a></li><li><a href=/docs/hugo/genpages/>公開用ファイルの生成</a></li><li><a href=/docs/hugo/shortcode/>独自ショートコードの定義</a></li><li><a href=/docs/hugo/book_katex/>Book テーマの hint ショートコードブロック内に数式を表示する際の注意</a></li></ul></li><li><a href=/docs/others/>その他</a><ul><li><a href=/docs/others/pmbok/>プロジェクトマネジメント知識体系 (PMBOK) ガイドに関するノート</a></li><li><a href=/docs/others/macroeconomics/>マクロ経済学</a><ul><li><a href=/docs/others/macroeconomics/jones-1/>ジョーンズ マクロ経済学Ⅰ</a></li></ul></li><li><a href=/docs/others/db/>データベース</a><ul><li><a href=/docs/others/db/newton/>MariaDB で Newton 法の計算をする方法</a></li></ul></li></ul></li></ul><ul><li><a href=/#disclaimer target=_blank rel=noopener>免責事項</a></li><li><a href=/#privacy_policy target=_blank rel=noopener>プライバシーポリシー</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Makefile プロジェクト</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#概要>概要</a></li><li><a href=#github-リポジトリ>Github リポジトリ</a></li><li><a href=#動作環境>動作環境</a></li><li><a href=#ディレクトリ構成>ディレクトリ構成</a></li><li><a href=#ソースコード関連のディレクトリ>ソースコード関連のディレクトリ</a><ul><li><a href=#include-ディレクトリ>include ディレクトリ</a></li><li><a href=#main-ディレクトリ>main ディレクトリ</a></li><li><a href=#src-ディレクトリ>src ディレクトリ</a></li><li><a href=#test-ディレクトリ>test ディレクトリ</a></li></ul></li><li><a href=#その他のファイル>その他のファイル</a><ul><li><a href=#doxyfile>Doxyfile</a></li><li><a href=#license>LICENSE</a></li><li><a href=#makefile>Makefile</a></li><li><a href=#readmemd>README.md</a></li></ul></li><li><a href=#その他のディレクトリ>その他のディレクトリ</a><ul><li><a href=#scripts-ディレクトリ>scripts ディレクトリ</a></li></ul></li><li><a href=#まとめ>まとめ</a></li><li><a href=#参考文献>参考文献</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=makefile-プロジェクト>Makefile プロジェクト
<a class=anchor href=#makefile-%e3%83%97%e3%83%ad%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88>#</a></h1><h2 id=概要>概要
<a class=anchor href=#%e6%a6%82%e8%a6%81>#</a></h2><p>本ページでは，Makefile を使ったプロジェクトのディレクトリ構成の例を説明します．</p><p><code>cpp_env_sample</code> ディレクトリ以下にソースコードなどを配置することとします．</p><h2 id=github-リポジトリ>Github リポジトリ
<a class=anchor href=#github-%e3%83%aa%e3%83%9d%e3%82%b8%e3%83%88%e3%83%aa>#</a></h2><p>本ページで説明するディレクトリ構成のプロジェクトは，以下の Github リポジトリ <a href=#cite:1>[1]</a> として公開しています．</p><p><a href=https://github.com/htakeuchi0/cpp_env_sample>https://github.com/htakeuchi0/cpp_env_sample</a></p><p>本ページは CC BY 4.0 のもとで提供していますが，このリポジトリはMITライセンスで公開しています．</p><h2 id=動作環境>動作環境
<a class=anchor href=#%e5%8b%95%e4%bd%9c%e7%92%b0%e5%a2%83>#</a></h2><p>本ページで説明するものは，以下の環境で動作するものです．</p><ul><li><p>OS: Linux (Ubuntu 18.04.5 LTS)</p><ul><li>コンパイラ: g++ (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0</li></ul></li><li><p>OS: Linux (Ubuntu 20.04.1 LTS)</p><ul><li>コンパイラ: g++ (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0</li></ul></li></ul><p>単体試験，カバレッジ計測，ドキュメント生成に，それぞれ以下を利用するものとします．</p><ul><li>Google Test <a href=#cite:2>[2]</a></li><li>LCOV <a href=#cite:3>[3]</a></li><li>Doxygen <a href=#cite:4>[4]</a></li></ul><h2 id=ディレクトリ構成>ディレクトリ構成
<a class=anchor href=#%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa%e6%a7%8b%e6%88%90>#</a></h2><p>ディレクトリ構成の例は以下の通りです．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- Doxyfile               - doxygen設定ファイル
   |- LICENSE                - ライセンスファイル
   |- Makefile               - makeファイル
   |- README.md              - READMEファイル
   |- include/               - ヘッダファイル
   |  |- cpp_env_sample/
   |     |- example.h
   |
   |- main/                  - メインファイル
   |  |- main.cc
   |
   |- scripts/               - 環境構築用スクリプト
   |  |- install_doxygen.sh
   |  |- install_gtest.sh
   |  |- install_lcov.sh
   |
   |- src/                   - ソースファイル
   |  |- example.cc
   |
   |- test/                  - テストファイル
      |- gtest_example.cc
</code></pre><h2 id=ソースコード関連のディレクトリ>ソースコード関連のディレクトリ
<a class=anchor href=#%e3%82%bd%e3%83%bc%e3%82%b9%e3%82%b3%e3%83%bc%e3%83%89%e9%96%a2%e9%80%a3%e3%81%ae%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa>#</a></h2><p>ソースコード関連のディレクトリを抜き出すと以下のとおりです．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- include/               - ヘッダファイル
   |  |- cpp_env_sample/
   |
   |- main/                  - メインファイル
   |- src/                   - ソースファイル
   |- test/                  - テストファイル
</code></pre><h3 id=include-ディレクトリ>include ディレクトリ
<a class=anchor href=#include-%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa>#</a></h3><p>ヘッダファイルを格納するディレクトリです．
ただし，<code>include</code> ディレクトリには直接置かず，その中にプロジェクト名と同じ名前のディレクトリを作り，その中にヘッダファイルを配置します．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- include/               - ヘッダファイル
      |- cpp_env_sample/
         |- example.h
</code></pre><p>ヘッダファイルの拡張子は <code>.h</code> とします．</p><p>ビルド時は <code>./include</code> にパスを通し，他のファイルからは，</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;cpp_env_sample/example.h&#34;</span><span style=color:#75715e>
</span></span></span></code></pre></div><p>のように参照します．</p><p>これは，プログラムを共有ライブラリとしてビルドし，ヘッダファイルを <code>/usr/local/include/cpp_env_sample</code> に置き，その共有ライブラリを使うプログラムが <code>/usr/local/include</code> にパスを通す場合，</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cpp_env_sample/example.h&gt;</span><span style=color:#75715e>
</span></span></span></code></pre></div><p>となるので，これと整合します．</p><p>好みだと思いますが<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>，特に，<strong>あるヘッダファイルが別のヘッダファイルを include する場合に，このようになっていると分かりやすいと思います．</strong></p><h3 id=main-ディレクトリ>main ディレクトリ
<a class=anchor href=#main-%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa>#</a></h3><p>main メソッドを含むメインファイルを格納するディレクトリです．<br>あえてそれ以外のソースファイルと分けています．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- main/                  - メインファイル
      |- main.cc
</code></pre><p>これは，プログラムを共有ライブラリとしてビルドするとき，<br>メインファイルは含めなくてよいと思いますので，初めからディレクトリをわけておきます．</p><p>メインファイルの名称は <code>main.cc</code> とします．</p><h3 id=src-ディレクトリ>src ディレクトリ
<a class=anchor href=#src-%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa>#</a></h3><p>メインファイル以外のソースファイルを格納するディレクトリです．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- src/                   - ソースファイル
      |- example.cc
</code></pre><p>ソースファイルの拡張子は <code>.cc</code> とします．</p><h3 id=test-ディレクトリ>test ディレクトリ
<a class=anchor href=#test-%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa>#</a></h3><p>単体試験用のテストファイルを格納するディレクトリです．<br>単体試験フレームワークには Google Test <a href=#cite:2>[2]</a> を利用します．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- test/                  - テストファイル
      |- gtest_example.cc
</code></pre><p>テストファイルの拡張子は <code>.cc</code> とし，<code>gtest_*.cc</code> という名前をつけます．</p><h2 id=その他のファイル>その他のファイル
<a class=anchor href=#%e3%81%9d%e3%81%ae%e4%bb%96%e3%81%ae%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab>#</a></h2><p>その他のファイルを抜き出すと以下の通りです．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- Doxyfile               - doxygen設定ファイル
   |- LICENSE                - ライセンスファイル
   |- Makefile               - makeファイル
   |- README.md              - READMEファイル
</code></pre><h3 id=doxyfile>Doxyfile
<a class=anchor href=#doxyfile>#</a></h3><p>Doxygen <a href=#cite:4>[4]</a> でドキュメントを生成するための設定ファイルです．<br><code>doxygen -g</code> コマンドで生成されたファイルを変更して使っています．<br>設定例は以下のとおりです．</p><table><thead><tr><th>項目</th><th>設定値</th></tr></thead><tbody><tr><td><code>PROJECT_NAME</code></td><td>C++サンプルプロジェクト</td></tr><tr><td><code>PROJECT_NUMBER</code></td><td>0.0.1</td></tr><tr><td><code>PROJECT_BRIEF</code></td><td>C++サンプルプロジェクト</td></tr><tr><td><code>OUTPUT_DIRECTORY</code></td><td>doxygen</td></tr><tr><td><code>EXTRACT_ALL</code></td><td>YES</td></tr><tr><td><code>INPUT</code></td><td>./</td></tr><tr><td><code>RECURSIVE</code></td><td>YES</td></tr><tr><td><code>EXCLUDE</code></td><td>build</td></tr><tr><td><code>USE_MDFILE_AS_MAINPAGE</code></td><td>README.md</td></tr><tr><td><code>GENERATE_LATEX</code></td><td>NO</td></tr></tbody></table><p><code>PROJECT_NAME</code>, <code>PROJECT_NUMBER</code>, <code>PROJECT_BRIEF</code> はプロエジェクト名やバージョンを表示するために指定します．</p><p><code>OUTPUT_DIRECTORY</code> は <code>doxygen</code> ディレクトリにドキュメントを生成させるために指定します．</p><p><code>EXTRACT_ALL</code> は private なメソッドやデータメンバも出力するなどのフラグを一括で立てるために指定します．</p><p><code>INPUT</code>, <code>RECURSIVE</code> はカレントディレクトリ以下の関連するファイルを自動的にすべてドキュメント化対象として認識させるために指定します．</p><p><code>EXLUDE</code> はビルド生成物が出力されるディレクトリを排除するために指定します．</p><p><code>USE_MDFILE_AS_MAINPAGE</code> は README.md の内容をトップに表示するために指定します．</p><p><code>GENERATE_LATEX</code> は
<link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>\(\LaTeX\)
</span>ファイルを出力しないために指定します．</p><h3 id=license>LICENSE
<a class=anchor href=#license>#</a></h3><p>ライセンスファイルです．必要に応じて作成します．<br>Github リポジトリで管理する場合は，Github でリポジトリ作成時にテンプレートを選択するか，<br>Add file > Create new file > Name you file&mldr; に <code>LICENSE</code> と入力することでテンプレートを利用できます．</p><p>ライセンスファイルを配置する場合は，必ずライセンスの内容を理解すべきです．</p><h3 id=makefile>Makefile
<a class=anchor href=#makefile>#</a></h3><p>ビルドのためのファイルです．以下のコマンドが実行ができるようなファイルを作成して配置しています．</p><table><thead><tr><th>コマンド</th><th>説明</th></tr></thead><tbody><tr><td><code>make</code> または <code>make build</code></td><td>実行可能ファイルのビルド</td></tr><tr><td><code>make lib</code></td><td>共有ライブラリのビルド</td></tr><tr><td><code>make install</code></td><td>共有ライブラリとヘッダファイルのインストール</td></tr><tr><td><code>make uninstall</code></td><td>共有ライブラリとヘッダファイルのアンインストール</td></tr><tr><td><code>make test</code></td><td>テストファイルのビルド</td></tr><tr><td><code>make lcov</code></td><td>単体試験のカバレッジ情報の生成</td></tr><tr><td><code>make docs</code></td><td>ドキュメントの生成</td></tr></tbody></table><p>コンパイルは原則分割コンパイルとして，一部のソースコードが変更されたら，そのソースコードに関するオブジェクトファイルのみを再生成することで，毎回全体をビルドしなくてすむようにしています．</p><p>また，ヘッダファイルだけを変更しても，必要なコンパイルができるように，依存ファイルも生成しています．</p><p>インストール先が固定であるなど，簡易的なつくりとしている箇所はあります．</p><p>Makefile 全体は以下の通りです．依存ファイルのビルドルールがないことを明示するために，空の生成ルールを定義しています．</p><p>それ以外は特筆する点はありませんが，<code>CXXFLAGS</code> はほぼリリース向けの設定となっており，開発中は適切なフラグを設定することと思います．</p><p><code>-include</code> で依存ファイルを読み込みますが，この定義は最終行に記載します．</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span>SHELL<span style=color:#f92672>=</span>/bin/bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># compiler and linker flags
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>CXX <span style=color:#f92672>=</span> g++
</span></span><span style=display:flex><span>LD <span style=color:#f92672>=</span> g++
</span></span><span style=display:flex><span>OPTIM <span style=color:#f92672>=</span> -O3
</span></span><span style=display:flex><span>CXXFLAGS <span style=color:#f92672>=</span> -std<span style=color:#f92672>=</span>c++17 -s -Wall
</span></span><span style=display:flex><span>DEPFLAGS <span style=color:#f92672>=</span> -MT $@ -MMD -MP -MF
</span></span><span style=display:flex><span>GCOVFLAGS <span style=color:#f92672>=</span> -fprofile-arcs -ftest-coverage -fno-inline -fno-inline-small-functions -fno-default-inline
</span></span><span style=display:flex><span>LDFLAGS <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span>TEST_LDFLAGS <span style=color:#f92672>=</span> -lgtest -lgtest_main -lpthread
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># library settings
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LIB_TARGET_BASE <span style=color:#f92672>=</span> libcppenvsample.so
</span></span><span style=display:flex><span>LIB_VER <span style=color:#f92672>=</span> 0.0.1
</span></span><span style=display:flex><span>INCLUDE_DIR <span style=color:#f92672>=</span> cpp_env_sample
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># targets
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>MAIN_TARGET <span style=color:#f92672>=</span> cpp_env_sample
</span></span><span style=display:flex><span>LIB_TARGET <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>LIB_TARGET_BASE<span style=color:#66d9ef>)</span>.<span style=color:#66d9ef>$(</span>LIB_VER<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>TEST_TARGET <span style=color:#f92672>=</span> test_cpp_env_sample
</span></span><span style=display:flex><span>GCOV_TARGET <span style=color:#f92672>=</span> gcov
</span></span><span style=display:flex><span>LCOV_TARGET <span style=color:#f92672>=</span> lcov
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>SRCDIR <span style=color:#f92672>=</span> src
</span></span><span style=display:flex><span>OBJDIR <span style=color:#f92672>=</span> build
</span></span><span style=display:flex><span>DEPDIR <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>SRCS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>wildcard <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/*.cc<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>OBJS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>subst <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>SRCS:.cc<span style=color:#f92672>=</span>.o<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># includes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>INCLUDES <span style=color:#f92672>=</span> -I./include
</span></span><span style=display:flex><span>TEST_INCLUDES <span style=color:#f92672>=</span> -I/usr/local/include
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># main
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>MAINDIR <span style=color:#f92672>=</span> main
</span></span><span style=display:flex><span>MAIN_SRCS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>MAINDIR<span style=color:#66d9ef>)</span>/main.cc
</span></span><span style=display:flex><span>MAIN_OBJS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>subst <span style=color:#66d9ef>$(</span>MAINDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>MAIN_SRCS:.cc<span style=color:#f92672>=</span>.o<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>DEPS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>OBJS:.o<span style=color:#f92672>=</span>.d<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>MAIN_OBJS:.o<span style=color:#f92672>=</span>.d<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># lib
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LIB_OBJDIR <span style=color:#f92672>=</span> build/lib
</span></span><span style=display:flex><span>LIB_DEPDIR <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>LIB_OBJDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>LIB_OBJS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>subst <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>LIB_OBJDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>SRCS:.cc<span style=color:#f92672>=</span>.o<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>LIB_DEPS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>LIB_OBJS:.o<span style=color:#f92672>=</span>.d<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># test
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>TEST_SRCDIR <span style=color:#f92672>=</span> test
</span></span><span style=display:flex><span>TEST_OBJDIR <span style=color:#f92672>=</span> build/test
</span></span><span style=display:flex><span>TEST_DEPDIR <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>TEST_OBJDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>TEST_SRCS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>wildcard <span style=color:#66d9ef>$(</span>TEST_SRCDIR<span style=color:#66d9ef>)</span>/*.cc<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>TEST_TARGET_OBJS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>subst <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>TEST_OBJDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>SRCS:.cc<span style=color:#f92672>=</span>.o<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>TEST_TEST_OBJS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>subst <span style=color:#66d9ef>$(</span>TEST_SRCDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>TEST_OBJDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>TEST_SRCS:.cc<span style=color:#f92672>=</span>.o<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>TEST_DEPS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>TEST_TARGET_OBJS:.o<span style=color:#f92672>=</span>.d<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>TEST_TEST_OBJS:.o<span style=color:#f92672>=</span>.d<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># gcov
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>GCOV_OBJDIR <span style=color:#f92672>=</span> build/gcov
</span></span><span style=display:flex><span>GCOV_DEPDIR <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>GCOV_OBJDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>GCOV_TARGET_OBJS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>subst <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>GCOV_OBJDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>SRCS:.cc<span style=color:#f92672>=</span>.o<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>GCOV_TEST_OBJS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>subst <span style=color:#66d9ef>$(</span>TEST_SRCDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>GCOV_OBJDIR<span style=color:#66d9ef>)</span>/,<span style=color:#66d9ef>$(</span>TEST_SRCS:.cc<span style=color:#f92672>=</span>.o<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>GCOV_DEPS <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>GCOV_TARGET_OBJS:.o<span style=color:#f92672>=</span>.d<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>GCOV_TEST_OBJS:.o<span style=color:#f92672>=</span>.d<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># lcov
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LCOVDIR <span style=color:#f92672>=</span> lcov
</span></span><span style=display:flex><span>COVERAGE <span style=color:#f92672>=</span> coverage.info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># doxygen
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>DOXYGEN <span style=color:#f92672>=</span> doxygen
</span></span><span style=display:flex><span>DOCDIR <span style=color:#f92672>=</span> doxygen
</span></span><span style=display:flex><span>INDEXPATH <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>DOXYGEN<span style=color:#66d9ef>)</span>/html/index.html
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> all build install uninstall lib test gcov lcov docs clean 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>build</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>MAIN_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>lib</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>LIB_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>install</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	@install -d /usr/local/include/<span style=color:#66d9ef>$(</span>INCLUDE_DIR<span style=color:#66d9ef>)</span> &gt; /dev/null 2&gt;&amp;<span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	@install include/<span style=color:#66d9ef>$(</span>INCLUDE_DIR<span style=color:#66d9ef>)</span>/* /usr/local/include/<span style=color:#66d9ef>$(</span>INCLUDE_DIR<span style=color:#66d9ef>)</span>/
</span></span><span style=display:flex><span>	@install <span style=color:#66d9ef>$(</span>LIB_OBJDIR<span style=color:#66d9ef>)</span>/<span style=color:#66d9ef>$(</span>LIB_TARGET<span style=color:#66d9ef>)</span> /usr/local/lib/
</span></span><span style=display:flex><span>	@ln -sf /usr/local/lib/<span style=color:#66d9ef>$(</span>LIB_TARGET<span style=color:#66d9ef>)</span> /usr/local/lib/<span style=color:#66d9ef>$(</span>LIB_TARGET_BASE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uninstall</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	@rm -rf /usr/local/include/<span style=color:#66d9ef>$(</span>INCLUDE_DIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@rm -f /usr/local/lib/<span style=color:#66d9ef>$(</span>LIB_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@rm -f /usr/local/lib/<span style=color:#66d9ef>$(</span>LIB_TARGET_BASE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>TEST_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(LCOV_TARGET)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>GCOV_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	lcov --capture --directory . --output-file <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	lcov --remove <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span> **include/c++/** --output-file <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	lcov --remove <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span> **bits** --output-file <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	lcov --remove <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span> **gtest*.h --output-file <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	lcov --remove <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span> **gtest*.cc --output-file <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	genhtml <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span> --output-directory <span style=color:#66d9ef>$(</span>LCOVDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@rm -f *.gcno
</span></span><span style=display:flex><span>	@rm -f *.gcda
</span></span><span style=display:flex><span>	@rm -f <span style=color:#66d9ef>$(</span>COVERAGE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@echo -n -e <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#66d9ef>$(</span>LCOVDIR<span style=color:#66d9ef>)</span>/index.html
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>docs</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>DOXYGEN<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#66d9ef>$(</span>INDEXPATH<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>all</span><span style=color:#f92672>:</span> build lib test lcov docs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(TEST_TARGET)</span><span style=color:#f92672>:</span> LDFLAGS += <span style=color:#66d9ef>$(</span>TEST_LDFLAGS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_TARGET)</span><span style=color:#f92672>:</span> LDFLAGS += <span style=color:#66d9ef>$(</span>TEST_LDFLAGS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(MAIN_TARGET)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>MAIN_OBJS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>OBJS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>LD<span style=color:#66d9ef>)</span> -o $@ $^ <span style=color:#66d9ef>$(</span>LDFLAGS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(TEST_TARGET)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>TEST_TEST_OBJS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>TEST_TARGET_OBJS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>LD<span style=color:#66d9ef>)</span> -o $@ $^ <span style=color:#66d9ef>$(</span>LDFLAGS<span style=color:#66d9ef>)</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_TARGET)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>GCOV_TEST_OBJS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>GCOV_TARGET_OBJS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>LD<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>GCOVFLAGS<span style=color:#66d9ef>)</span> -o <span style=color:#66d9ef>$(</span>TEST_TARGET<span style=color:#66d9ef>)</span> $^ <span style=color:#66d9ef>$(</span>LDFLAGS<span style=color:#66d9ef>)</span> 
</span></span><span style=display:flex><span>	./<span style=color:#66d9ef>$(</span>TEST_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(LIB_TARGET)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>LIB_OBJS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>LD<span style=color:#66d9ef>)</span> -shared -o <span style=color:#66d9ef>$(</span>LIB_OBJDIR<span style=color:#66d9ef>)</span>/$@ $^ <span style=color:#66d9ef>$(</span>LDFLAGS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(MAIN_TARGET)</span><span style=color:#f92672>:</span> DEPFLAGS += <span style=color:#66d9ef>$(</span>DEPDIR<span style=color:#66d9ef>)</span>/$*.d
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(TEST_TARGET)</span><span style=color:#f92672>:</span> DEPFLAGS += <span style=color:#66d9ef>$(</span>TEST_DEPDIR<span style=color:#66d9ef>)</span>/$*.d
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(LIB_TARGET)</span><span style=color:#f92672>:</span> DEPFLAGS += <span style=color:#66d9ef>$(</span>LIB_DEPDIR<span style=color:#66d9ef>)</span>/$*.d
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_TARGET)</span><span style=color:#f92672>:</span> DEPFLAGS += <span style=color:#66d9ef>$(</span>GCOV_DEPDIR<span style=color:#66d9ef>)</span>/$*.d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CXXFLAGS <span style=color:#f92672>+=</span> <span style=color:#66d9ef>$(</span>DEPFLAGS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_TARGET)</span><span style=color:#f92672>:</span> CXXFLAGS += <span style=color:#66d9ef>$(</span>GCOVFLAGS<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(TEST_TARGET)</span><span style=color:#f92672>:</span> INCLUDES += <span style=color:#66d9ef>$(</span>TEST_INCLUDES<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_TARGET)</span><span style=color:#f92672>:</span> INCLUDES += <span style=color:#66d9ef>$(</span>TEST_INCLUDES<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(OBJS)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>/%.o: <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/%.cc <span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>/%.d
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>OBJS<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>CXX<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>CXXFLAGS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>OPTIM<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>INCLUDES<span style=color:#66d9ef>)</span> -c $&lt; -o $@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(MAIN_OBJS)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>/%.o: <span style=color:#66d9ef>$(</span>MAINDIR<span style=color:#66d9ef>)</span>/%.cc <span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>/%.d
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>OBJS<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>CXX<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>CXXFLAGS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>OPTIM<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>INCLUDES<span style=color:#66d9ef>)</span> -c $&lt; -o $@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(DEPS)</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(LIB_OBJS)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>LIB_OBJDIR<span style=color:#66d9ef>)</span>/%.o: <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/%.cc <span style=color:#66d9ef>$(</span>LIB_OBJDIR<span style=color:#66d9ef>)</span>/%.d
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>LIB_OBJS<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>CXX<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>CXXFLAGS<span style=color:#66d9ef>)</span> -fPIC <span style=color:#66d9ef>$(</span>OPTIM<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>INCLUDES<span style=color:#66d9ef>)</span> -c $&lt; -o $@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(LIB_DEPS)</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(TEST_TEST_OBJS)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>TEST_OBJDIR<span style=color:#66d9ef>)</span>/%.o: <span style=color:#66d9ef>$(</span>TEST_SRCDIR<span style=color:#66d9ef>)</span>/%.cc <span style=color:#66d9ef>$(</span>TEST_OBJDIR<span style=color:#66d9ef>)</span>/%.d
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>TEST_TARGET_OBJS<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>CXX<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>CXXFLAGS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>OPTIM<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>INCLUDES<span style=color:#66d9ef>)</span> -c $&lt; -o $@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(TEST_TARGET_OBJS)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>TEST_OBJDIR<span style=color:#66d9ef>)</span>/%.o: <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/%.cc <span style=color:#66d9ef>$(</span>TEST_OBJDIR<span style=color:#66d9ef>)</span>/%.d
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>TEST_TARGET_OBJS<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>CXX<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>CXXFLAGS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>OPTIM<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>INCLUDES<span style=color:#66d9ef>)</span> -c $&lt; -o $@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(TEST_DEPS)</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_TEST_OBJS)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>GCOV_OBJDIR<span style=color:#66d9ef>)</span>/%.o: <span style=color:#66d9ef>$(</span>TEST_SRCDIR<span style=color:#66d9ef>)</span>/%.cc <span style=color:#66d9ef>$(</span>GCOV_OBJDIR<span style=color:#66d9ef>)</span>/%.d
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>GCOV_TARGET_OBJS<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>CXX<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>CXXFLAGS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>OPTIM<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>INCLUDES<span style=color:#66d9ef>)</span> -c $&lt; -o $@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_TARGET_OBJS)</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>GCOV_OBJDIR<span style=color:#66d9ef>)</span>/%.o: <span style=color:#66d9ef>$(</span>SRCDIR<span style=color:#66d9ef>)</span>/%.cc <span style=color:#66d9ef>$(</span>GCOV_OBJDIR<span style=color:#66d9ef>)</span>/%.d
</span></span><span style=display:flex><span>	@mkdir -p <span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>GCOV_TARGET_OBJS<span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>CXX<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>CXXFLAGS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>OPTIM<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>INCLUDES<span style=color:#66d9ef>)</span> -c $&lt; -o $@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$(GCOV_DEPS)</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	@rm -f <span style=color:#66d9ef>$(</span>MAIN_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@rm -f <span style=color:#66d9ef>$(</span>TEST_TARGET<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@rm -rf <span style=color:#66d9ef>$(</span>OBJDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@rm -rf <span style=color:#66d9ef>$(</span>LCOVDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@rm -rf <span style=color:#66d9ef>$(</span>DOCDIR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>-include</span> <span style=color:#66d9ef>$(</span>DEPS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>TEST_DEPS<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>GCOV_DEPS<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><h3 id=readmemd>README.md
<a class=anchor href=#readmemd>#</a></h3><p>プロジェクトの説明を記載したファイルです．</p><h2 id=その他のディレクトリ>その他のディレクトリ
<a class=anchor href=#%e3%81%9d%e3%81%ae%e4%bb%96%e3%81%ae%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa>#</a></h2><p>その他のディレクトリを抜き出すと以下の通りです．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- scripts/               - 環境構築用スクリプト
</code></pre><h3 id=scripts-ディレクトリ>scripts ディレクトリ
<a class=anchor href=#scripts-%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa>#</a></h3><p>環境構築用スクリプトとして，Doxygen, Google Test, LCOV のインストールスクリプトを配置しています．</p><pre tabindex=0><code>|- cpp_env_sample/
   |- scripts/               - 環境構築用スクリプト
      |- install_doxygen.sh
      |- install_gtest.sh
      |- install_lcov.sh
</code></pre><p>それ以外に，スクリプトを配置する場合は，このディレクトリに配置します．</p><h2 id=まとめ>まとめ
<a class=anchor href=#%e3%81%be%e3%81%a8%e3%82%81>#</a></h2><p>本ページでは，Makefile を使ったプロジェクトのディレクトリ構成の例を説明しました．</p><h2 id=参考文献>参考文献
<a class=anchor href=#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae>#</a></h2><p><a id=cite:1></a>[1] htakeuchi0, &ldquo;htakeuchi0/cpp_env_sample: A C++ sample project&rdquo;, <a href=https://github.com/htakeuchi0/cpp_env_sample>https://github.com/htakeuchi0/cpp_env_sample</a>, 2022/10/5 最終アクセス．<br><a id=cite:2></a>[2] Google, &ldquo;google/googletest: GoogleTest - Google Testing and Mocking Framework&rdquo;, <a href=https://github.com/google/googletest>https://github.com/google/googletest</a>, 2022/10/5 最終アクセス．<br><a id=cite:3></a>[3] linux-test-project, &ldquo;linux-test-project/lcov: LCOV&rdquo;, <a href=https://github.com/linux-test-project/lcov>https://github.com/linux-test-project/lcov</a>, 2022/10/5 最終アクセス．<br><a id=cite:4></a>[4] Doxygen, &ldquo;Doxygen: Doxygen&rdquo;, <a href=https://doxygen.nl/index.html>https://doxygen.nl/index.html</a>, 2022/10/5 最終アクセス．</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>たとえば，<code>include</code> ディレクトリ以下に直接配置し，<code>/usr/local/include/cpp_env_sample</code> にコピーする場合は，ユーザに <code>/usr/local/include/cpp_env_sample</code> にパスを通してもらえば，<code>#include &lt;example.h></code> と書けます．この場合，ほかのライブラリとの名前の衝突が気になるので，初めから本文のようにしておいた方が，余計なことを考えなくてすむと思います．&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><hr><p xmlns:cc=http://creativecommons.org/ns#>This work is licensed under <a href=https://creativecommons.org/licenses/by/4.0/deed.ja target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY 4.0<img style="height:22px !important;margin-left:3px;vertical-align:text-bottom" src=https://mirrors.creativecommons.org/presskit/icons/cc.svg alt><img style="height:22px !important;margin-left:3px;vertical-align:text-bottom" src=https://mirrors.creativecommons.org/presskit/icons/by.svg alt></a></p><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/htakeuchi0/htakeuchi0.github.io-sources/commit/f9af4352806110ab95cf1aa102cede7a774ca895 title='Last modified by htakeuchi0 | January 27, 2025' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>January 27, 2025</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#概要>概要</a></li><li><a href=#github-リポジトリ>Github リポジトリ</a></li><li><a href=#動作環境>動作環境</a></li><li><a href=#ディレクトリ構成>ディレクトリ構成</a></li><li><a href=#ソースコード関連のディレクトリ>ソースコード関連のディレクトリ</a><ul><li><a href=#include-ディレクトリ>include ディレクトリ</a></li><li><a href=#main-ディレクトリ>main ディレクトリ</a></li><li><a href=#src-ディレクトリ>src ディレクトリ</a></li><li><a href=#test-ディレクトリ>test ディレクトリ</a></li></ul></li><li><a href=#その他のファイル>その他のファイル</a><ul><li><a href=#doxyfile>Doxyfile</a></li><li><a href=#license>LICENSE</a></li><li><a href=#makefile>Makefile</a></li><li><a href=#readmemd>README.md</a></li></ul></li><li><a href=#その他のディレクトリ>その他のディレクトリ</a><ul><li><a href=#scripts-ディレクトリ>scripts ディレクトリ</a></li></ul></li><li><a href=#まとめ>まとめ</a></li><li><a href=#参考文献>参考文献</a></li></ul></nav></div></aside></main></body></html>